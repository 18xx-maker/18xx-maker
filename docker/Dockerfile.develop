FROM node:22 AS develop
EXPOSE 3000

RUN mkdir -p /root/Downloads /18xx
WORKDIR /18xx

COPY package.json /18xx/
COPY yarn.lock /18xx

# Install deps and browsers for playwrite
RUN yarn && yarn playwright install chromium --only-shell --with-deps

# Copy site code
COPY . /18xx
VOLUME /18xx

# Command that runs
ENTRYPOINT ["yarn"]
CMD ["start", "--host", "--no-open"]
